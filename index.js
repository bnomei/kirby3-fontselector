(function(){"use strict";function s(t,e,n,o,m,v,_,w){var i=typeof t=="function"?t.options:t;return e&&(i.render=e,i.staticRenderFns=n,i._compiled=!0),{exports:t,options:i}}const a={props:{help:String,label:String,when:String,default:String,disabled:Boolean,value:String,reload:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},data(){return{options:[],loading:!1}},created(){this.syncContent(),this.$events.on("model.update",()=>this.reload&&this.syncContent())},methods:{onInput(t){this.$emit("input",t)},syncContent(){this.loading=!0,this.$api.get("fontselector/families?reload="+(this.reload?"1":"0")).then(t=>{this.options=t.families?t.families:[],this.options.some(e=>e.value===this.value)===!1&&this.onInput(""),this.loading=!1}).catch(()=>{this.loading=!1})}}};var l=function(){var e=this,n=e._self._c;return n("k-select-field",{staticClass:"k-fontfamily-field",attrs:{help:e.help,label:e.label,when:e.when,default:this.default,disabled:e.disabled,value:e.value,options:e.options},on:{input:e.onInput}})},r=[],d=s(a,l,r);const h=d.exports,f={props:{help:String,label:String,when:String,watchField:String,default:String,disabled:Boolean,value:String,required:{type:Boolean,default:!0}},data(){return{options:[],loading:!1}},computed:{hasChanges(){return Object.keys(this.$panel.content.diff()).length>0},fontFamily(){return console.log(this.$panel.view.props.versions.changes),this.$panel.view.props.versions.changes[this.watchField]}},watch:{fontFamily(){this.syncContent(this.fontFamily)}},created(){this.syncContent(this.$panel.view.props.versions.changes[this.watchField])},methods:{onInput(t){this.$emit("input",t)},syncContent(t){if(t===void 0||t.length===0){this.options=[],this.onInput("");return}this.loading=!0,this.$api.get("fontselector/family/"+encodeURIComponent(t)).then(e=>{this.options=e.weight?e.weight:[],this.options.some(n=>n.value===this.value)===!1&&this.onInput(""),this.loading=!1}).catch(()=>{this.loading=!1})}}};var c=function(){var e=this,n=e._self._c;return n("k-select-field",{staticClass:"k-fontweight-field",attrs:{help:e.help,label:e.label,when:e.when,default:this.default,disabled:e.disabled,options:e.options,required:e.required},on:{input:e.onInput},model:{value:e.value,callback:function(o){e.value=o},expression:"value"}})},u=[],p=s(f,c,u);const g=p.exports;panel.plugin("bnomei/fontselector",{fields:{fontfamily:h,fontweight:g}})})();
